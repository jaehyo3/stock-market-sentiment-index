{% extends 'layout.html' %}

{% block title %}로그인{% endblock %}

{% block content %}
<div class="auth-container">
    <div class="card auth-card">
        <div class="card-body">
            <form method="POST" action="{{ url_for('users_login_bp.login') }}">
                <label for="login-id">아이디</label>
                <input type="text" id="login-id" name="userid" placeholder="아이디를 입력하세요" required />

                <label for="login-pw">비밀번호</label>
                <input type="password" id="login-pw" name="password" placeholder="비밀번호를 입력하세요" required />

                <button type="submit" class="btn btn-primary full">로그인</button>
            </form>
            <p class="auth-link">아직 회원이 아니신가요? <a href="{{ url_for('users_signup_bp.signup') }}">회원가입</a></p>
        </div>
    </div>
</div>

<!-- 에러 모달 (기본적으로 숨겨짐) -->
<div id="alertModal" class="modal" style="display: none;">
    <p id="alertMessage"></p>
    <button style="margin-left: 20px;" onclick="closeModal()">확인</button>
</div>

<script>
    // 모달을 표시하는 함수
    function showModal(message, type) {
        const modal = document.getElementById('alertModal');
        const alertMessage = document.getElementById('alertMessage');

        modal.style.display = 'flex';  // 모달 띄우기
        alertMessage.textContent = message;  // 메시지 설정
    }

    function closeModal() {
        const modal = document.getElementById('alertModal');
        modal.style.display = 'none';  // 모달 닫기
    }

    window.onload = function () {
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    {% if category == 'error' %}
                        showModal("{{ message }}", 'error');  // 에러 모달 띄우기
                    {% endif %}
                {% endfor %}
            {% endif %}
        {% endwith %}
    };
</script>
{% endblock %}
